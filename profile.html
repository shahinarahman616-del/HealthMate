New profile Which was working:
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <title>HealthMate - Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
    }
    ::-webkit-scrollbar-thumb {
      background: #94a3b8;
      border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.3s ease-out forwards;
    }

    @keyframes popIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    .pop-in {
      animation: popIn 0.2s ease-out forwards;
    }

    /* Health card hover effects */
    .health-card {
      transition: all 0.3s ease;
    }
    .health-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    
    .profile-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e6f3ff 100%);
    }
    
    .stat-card {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    }
    
    /* Profile picture styling */
    .profile-pic-container {
      position: relative;
      display: inline-block;
    }
    
    .profile-pic-overlay {
      position: absolute;
      bottom: 0;
      right: 0;
      background: rgba(59, 130, 246, 0.9);
      color: white;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .profile-pic-overlay:hover {
      background: rgba(37, 99, 235, 0.9);
      transform: scale(1.1);
    }

    /* Mobile menu styles */
    @media (max-width: 768px) {
      .mobile-menu-open {
        transform: translateX(0) !important;
      }
      
      .mobile-menu-overlay {
        opacity: 1 !important;
        pointer-events: auto !important;
      }
      
      .modal-content {
        width: 95% !important;
        max-height: 90vh !important;
        overflow-y: auto !important;
      }
      
      /* Improve touch targets */
      button, input[type="checkbox"], input[type="radio"] {
        min-height: 44px;
      }
      
      select, input, textarea {
        font-size: 16px !important; /* Prevents zoom on iOS */
      }
      
      /* Adjust sidebar for mobile */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 280px;
        z-index: 50;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
      }
      
      .sidebar-open {
        transform: translateX(0);
      }
    }

    /* Prevent horizontal scroll */
    body {
      overflow-x: hidden;
    }

    /* Mobile bottom navigation */
    .mobile-bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: white;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }

    /* Improve form inputs on mobile */
    @media (max-width: 640px) {
      input, select, textarea {
        font-size: 16px !important;
      }
      
      .modal-content {
        margin: 10px !important;
        padding: 20px !important;
      }
    }

    /* Stats cards responsive */
    @media (max-width: 640px) {
      .stats-grid {
        grid-template-columns: 1fr 1fr !important;
      }
      
      .personal-details-grid {
        grid-template-columns: 1fr !important;
      }
    }
  </style>
</head>
<body class="bg-slate-100 font-sans antialiased pb-16 md:pb-0">
  <!-- Mobile Bottom Navigation -->
  <nav class="mobile-bottom-nav md:hidden flex justify-around items-center py-3 border-t border-slate-200">
    <button onclick="goToDashboard()" class="flex flex-col items-center text-slate-600 hover:text-blue-600">
      <span class="text-2xl">üè†</span>
      <span class="text-xs mt-1">Home</span>
    </button>
    <button onclick="goToReports()" class="flex flex-col items-center text-slate-600 hover:text-blue-600">
      <span class="text-2xl">üìÑ</span>
      <span class="text-xs mt-1">Reports</span>
    </button>
    <button onclick="goToAppointments()" class="flex flex-col items-center text-slate-600 hover:text-blue-600">
      <span class="text-2xl">üìÖ</span>
      <span class="text-xs mt-1">Book</span>
    </button>
    <button onclick="toggleMobileMenu()" class="flex flex-col items-center text-slate-600 hover:text-blue-600">
      <span class="text-2xl">‚ò∞</span>
      <span class="text-xs mt-1">Menu</span>
    </button>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div id="mobileMenuOverlay" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden opacity-0 pointer-events-none transition-opacity duration-300">
    <div id="mobileMenu" class="fixed top-0 left-0 h-full w-64 bg-white shadow-xl transform -translate-x-full transition-transform duration-300 z-50">
      <div class="p-6">
        <div class="flex justify-between items-center mb-8">
          <div class="flex items-center gap-3">
            <span class="text-3xl">üíö</span>
            <h1 class="text-xl font-semibold text-slate-800">HealthMate</h1>
          </div>
          <button onclick="toggleMobileMenu()" class="text-2xl text-slate-500">√ó</button>
        </div>
        
        <ul class="space-y-4">
          <li><button onclick="goToDashboard(); toggleMobileMenu();" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">üè†</span> Dashboard
          </button></li>
          <li><button onclick="goToReports(); toggleMobileMenu();" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">üìÑ</span> My Reports
          </button></li>
          <li><button onclick="toggleMobileMenu();" class="w-full text-left font-medium text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">üë§</span> Profile
          </button></li>
          <li><button onclick="goToFamily(); toggleMobileMenu();" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">üë®‚Äçüë©‚Äçüëß</span> Family
          </button></li>
          <li><button onclick="goToReminders(); toggleMobileMenu();" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">‚è∞</span> Reminders
          </button></li>
          <li><button onclick="goToAppointments(); toggleMobileMenu();" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">üìÖ</span> Appointments
          </button></li>
          <li><button onclick="goToAIInsights(); toggleMobileMenu();" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
            <span class="text-xl">ü§ñ</span> AI Health Insights
          </button></li>
          <li class="pt-4 border-t border-slate-200">
            <button onclick="logout()" class="w-full text-left font-medium text-red-600 hover:bg-red-50 rounded-lg px-3 py-3 transition-all duration-200 flex items-center gap-3">
              <span class="text-xl">üö™</span> Logout
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Top Navigation -->
  <nav class="sticky top-0 z-30 w-full bg-white/80 backdrop-blur-md shadow-sm">
    <div class="max-w-7xl mx-auto flex justify-between items-center p-4">
      <div class="flex items-center gap-3">
        <button onclick="toggleMobileMenu()" class="md:hidden text-2xl text-slate-700">
          ‚ò∞
        </button>
        <span class="text-3xl">üíö</span>
        <h1 class="text-2xl font-semibold text-slate-800 hidden md:block">HealthMate</h1>
        <h1 class="text-xl font-semibold text-slate-800 md:hidden">HealthMate</h1>
      </div>
      <div id="authStatus" class="text-sm font-medium text-slate-600 px-3 py-1 bg-slate-200 rounded-full hidden md:block">
        Connected
      </div>
      <button onclick="logout()" class="hidden md:block bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 font-medium transition-all duration-200">
        Logout
      </button>
    </div>
  </nav>

  <div class="flex max-w-7xl mx-auto mt-4 md:mt-6 px-2 md:px-0">
    <!-- Desktop Sidebar -->
    <aside class="hidden md:block w-56 sticky top-24 self-start flex-shrink-0 pr-6">
      <div class="bg-white rounded-xl shadow-sm p-4">
        <h2 class="text-xl font-bold text-blue-600 mb-5 px-2">Menu</h2>
        <ul class="space-y-2">
          <li><a href="dashboard.html" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-all duration-200 block">üè† Dashboard</a></li>
          <li><a href="dashboard.html#myReports" onclick="showReports()" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-all duration-200 block">üìÑ My Reports</a></li>
          <li><a href="profile.html" class="w-full text-left font-medium text-blue-600 bg-blue-50 rounded-lg px-3 py-2 transition-all duration-200 block">üë§ Profile</a></li>
          <li><a href="dashboard.html#family" onclick="showFamily()" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-all duration-200 block">üë®‚Äçüë©‚Äçüëß Family</a></li>
          <li><a href="dashboard.html#reminders" onclick="showReminders()" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-all duration-200 block">‚è∞ Reminders</a></li>
          <li><a href="dashboard.html#appointments" onclick="showAppointments()" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-all duration-200 block">üìÖ Appointments</a></li>
          <li><a href="dashboard.html#aiHealthInsights" onclick="showAIInsights()" class="w-full text-left font-medium text-slate-700 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-all duration-200 block">ü§ñ AI Health Insights</a></li>
        </ul>
        <div class="mt-8 pt-4 border-t border-slate-200">
          <button onclick="logout()" class="w-full text-left font-medium text-red-600 hover:bg-red-50 rounded-lg px-3 py-2 transition-all duration-200">üö™ Logout</button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-4 md:p-6 bg-white rounded-xl shadow-sm min-h-screen fade-in">
      <div class="mb-6 md:mb-8">
        <h1 class="text-2xl md:text-3xl font-bold text-blue-800 mb-2">My Profile</h1>
        <p class="text-slate-600 text-sm md:text-base">View and manage your personal health information</p>
      </div>

      <!-- Profile Header -->
      <div class="bg-white rounded-xl shadow-md p-4 md:p-6 mb-6 profile-section">
        <div class="flex flex-col md:flex-row items-center gap-4 md:gap-6">
          <div class="profile-pic-container">
            <img id="profilePicture" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" 
                 alt="Profile" class="w-24 h-24 md:w-32 md:h-32 rounded-full object-cover border-4 border-blue-100">
            <div class="profile-pic-overlay" onclick="document.getElementById('profileUpload').click()">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
              </svg>
            </div>
            <input type="file" id="profileUpload" class="hidden" accept="image/*" onchange="handleProfilePictureChange(event)">
          </div>
          
          <div class="flex-1 text-center md:text-left">
            <h2 id="profileFullName" class="text-xl md:text-2xl font-bold text-slate-800 mb-1 md:mb-2">Loading...</h2>
            <p id="profileEmail" class="text-slate-600 text-sm md:text-base mb-3 md:mb-4">Loading...</p>
            <div class="flex flex-wrap gap-2 justify-center md:justify-start">
              <span class="bg-blue-100 text-blue-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium" id="profileBloodGroup">Loading...</span>
              <span class="bg-green-100 text-green-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium" id="profileGender">Loading...</span>
              <span class="bg-purple-100 text-purple-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium" id="profileAge">Loading...</span>
            </div>
          </div>
          
          <button onclick="editProfile()" class="mt-4 md:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 md:px-5 py-2 md:py-2 rounded-lg font-medium transition flex items-center justify-center gap-2 w-full md:w-auto">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" viewBox="0 0 20 20" fill="currentColor">
              <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
            </svg>
            Edit Profile
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6">
        <!-- Personal Information -->
        <div class="lg:col-span-2 space-y-4 md:space-y-6">
          <!-- Health Stats -->
          <div class="bg-white rounded-xl shadow-md p-4 md:p-6 health-card">
            <h3 class="text-lg md:text-xl font-bold text-blue-700 mb-3 md:mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
              Health Statistics
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 stats-grid">
              <div class="stat-card text-white rounded-lg p-3 md:p-4 text-center">
                <p class="text-xs md:text-sm opacity-90">Height</p>
                <p id="profileHeight" class="text-lg md:text-2xl font-bold">--</p>
              </div>
              <div class="stat-card text-white rounded-lg p-3 md:p-4 text-center">
                <p class="text-xs md:text-sm opacity-90">Weight</p>
                <p id="profileWeight" class="text-lg md:text-2xl font-bold">--</p>
              </div>
              <div class="bg-green-500 text-white rounded-lg p-3 md:p-4 text-center">
                <p class="text-xs md:text-sm opacity-90">BMI</p>
                <p id="profileBMI" class="text-lg md:text-2xl font-bold">--</p>
              </div>
              <div class="bg-purple-500 text-white rounded-lg p-3 md:p-4 text-center">
                <p class="text-xs md:text-sm opacity-90">Last Checkup</p>
                <p class="text-base md:text-lg font-bold">2 mo ago</p>
              </div>
            </div>
          </div>

          <!-- Personal Details -->
          <div class="bg-white rounded-xl shadow-md p-4 md:p-6 health-card">
            <h3 class="text-lg md:text-xl font-bold text-blue-700 mb-3 md:mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
              Personal Details
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 personal-details-grid">
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Full Name</label>
                <p id="profileDetailName" class="text-slate-800 font-medium text-sm md:text-base">Loading...</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Email Address</label>
                <p id="profileDetailEmail" class="text-slate-800 font-medium text-sm md:text-base">Loading...</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Phone Number</label>
                <p id="profilePhone" class="text-slate-800 font-medium text-sm md:text-base">Loading...</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Address</label>
                <p id="profileAddress" class="text-slate-800 font-medium text-sm md:text-base">Loading...</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Blood Group</label>
                <p id="profileDetailBlood" class="text-slate-800 font-medium text-sm md:text-base">Loading...</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Gender</label>
                <p id="profileDetailGender" class="text-slate-800 font-medium text-sm md:text-base">Loading...</p>
              </div>
            </div>
          </div>

          <!-- Health Conditions -->
          <div class="bg-white rounded-xl shadow-md p-4 md:p-6 health-card">
            <h3 class="text-lg md:text-xl font-bold text-blue-700 mb-3 md:mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
              </svg>
              Health Conditions
            </h3>
            <div id="chronicDiseases" class="flex flex-wrap gap-2 mb-3 md:mb-4">
              <!-- Chronic diseases will be populated here -->
            </div>
            <div>
              <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1 md:mb-2">Allergies</label>
              <p class="text-slate-800 text-sm md:text-base">No known allergies recorded</p>
            </div>
          </div>
        </div>

        <!-- Sidebar Content -->
        <div class="space-y-4 md:space-y-6">
          <!-- Emergency Contact -->
          <div class="bg-white rounded-xl shadow-md p-4 md:p-6 health-card">
            <h3 class="text-lg md:text-xl font-bold text-blue-700 mb-3 md:mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Emergency Contact
            </h3>
            <div class="space-y-3 md:space-y-4">
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Contact Name</label>
                <p class="text-slate-800 font-medium text-sm md:text-base">Not set</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Phone Number</label>
                <p class="text-slate-800 font-medium text-sm md:text-base">Not set</p>
              </div>
              <div>
                <label class="block text-xs md:text-sm font-medium text-slate-500 mb-1">Relationship</label>
                <p class="text-slate-800 font-medium text-sm md:text-base">Not set</p>
              </div>
              <button class="w-full bg-blue-100 hover:bg-blue-200 text-blue-700 py-2 md:py-2 rounded-lg font-medium transition text-sm md:text-base">
                + Add Emergency Contact
              </button>
            </div>
          </div>

          <!-- Health Goals -->
          <div class="bg-white rounded-xl shadow-md p-4 md:p-6 health-card">
            <h3 class="text-lg md:text-xl font-bold text-blue-700 mb-3 md:mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Health Goals
            </h3>
            <div class="space-y-2 md:space-y-3">
              <div class="flex items-center justify-between">
                <span class="text-slate-700 text-sm md:text-base">Weight Management</span>
                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">In Progress</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-700 text-sm md:text-base">Regular Exercise</span>
                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Not Started</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-700 text-sm md:text-base">Balanced Diet</span>
                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Completed</span>
              </div>
            </div>
            <button class="w-full mt-3 md:mt-4 bg-green-100 hover:bg-green-200 text-green-700 py-2 md:py-2 rounded-lg font-medium transition text-sm md:text-base">
              + Set New Goal
            </button>
          </div>

          <!-- Recent Activity -->
          <div class="bg-white rounded-xl shadow-md p-4 md:p-6 health-card">
            <h3 class="text-lg md:text-xl font-bold text-blue-700 mb-3 md:mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Recent Activity
            </h3>
            <div class="space-y-3">
              <div class="flex items-start gap-3">
                <div class="bg-blue-100 p-2 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                </div>
                <div>
                  <p class="text-sm font-medium">Medical report uploaded</p>
                  <p class="text-xs text-slate-500">2 days ago</p>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <div class="bg-green-100 p-2 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" viewBox="0 0 20 20" fill="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                </div>
                <div>
                  <p class="text-sm font-medium">Appointment scheduled</p>
                  <p class="text-xs text-slate-500">1 week ago</p>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <div class="bg-purple-100 p-2 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" viewBox="0 0 20 20" fill="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div>
                  <p class="text-sm font-medium">Symptom logged</p>
                  <p class="text-xs text-slate-500">2 weeks ago</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Edit Profile Modal -->
  <div id="editProfileModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 md:p-4 hidden z-50">
    <div class="bg-white rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto pop-in">
      <div class="p-4 md:p-6 border-b">
        <h2 class="text-xl md:text-2xl font-bold text-blue-700">Edit Profile</h2>
      </div>
      <div class="p-4 md:p-6">
        <form id="editProfileForm" class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Full Name</label>
              <input type="text" id="editFullName" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Email</label>
              <input type="email" id="editEmail" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base" readonly>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Phone</label>
              <input type="tel" id="editPhone" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Age</label>
              <input type="number" id="editAge" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Height (cm)</label>
              <input type="number" id="editHeight" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Weight (kg)</label>
              <input type="number" id="editWeight" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Blood Group</label>
              <select id="editBloodGroup" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
                <option value="">Select Blood Group</option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Gender</label>
              <select id="editGender" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base">
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Address</label>
            <textarea id="editAddress" rows="3" class="w-full border border-slate-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base"></textarea>
          </div>
        </form>
      </div>
      <div class="p-4 md:p-6 border-t flex justify-end gap-3">
        <button onclick="closeEditModal()" class="bg-slate-200 hover:bg-slate-300 text-slate-800 px-4 md:px-5 py-2 md:py-2 rounded-lg font-medium transition text-sm md:text-base">
          Cancel
        </button>
        <button onclick="saveProfile()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 md:px-5 py-2 md:py-2 rounded-lg font-medium transition text-sm md:text-base">
          Save Changes
        </button>
      </div>
    </div>
  </div>

  <script>
    // Mobile menu state
    let mobileMenuOpen = false;

    // Toggle mobile menu
    function toggleMobileMenu() {
      mobileMenuOpen = !mobileMenuOpen;
      const overlay = document.getElementById('mobileMenuOverlay');
      const menu = document.getElementById('mobileMenu');
      
      if (mobileMenuOpen) {
        overlay.classList.remove('hidden');
        overlay.classList.remove('opacity-0');
        overlay.classList.add('opacity-100', 'pointer-events-auto');
        menu.classList.remove('-translate-x-full');
        menu.classList.add('translate-x-0');
        document.body.style.overflow = 'hidden';
      } else {
        overlay.classList.add('opacity-0', 'pointer-events-none');
        menu.classList.remove('translate-x-0');
        menu.classList.add('-translate-x-full');
        setTimeout(() => {
          overlay.classList.add('hidden');
        }, 300);
        document.body.style.overflow = '';
      }
    }

    // Close mobile menu when clicking outside
    document.getElementById('mobileMenuOverlay')?.addEventListener('click', function(e) {
      if (e.target === this) {
        toggleMobileMenu();
      }
    });

    // Navigation functions
    function goToDashboard() {
      window.location.href = 'dashboard.html';
    }

    function goToReports() {
      window.location.href = 'dashboard.html#myReports';
    }

    function goToAppointments() {
      window.location.href = 'dashboard.html#appointments';
    }

    function goToFamily() {
      window.location.href = 'dashboard.html#family';
    }

    function goToReminders() {
      window.location.href = 'dashboard.html#reminders';
    }

    function goToAIInsights() {
      window.location.href = 'dashboard.html#aiHealthInsights';
    }

    // Functions for dashboard navigation (if needed from sidebar)
    function showReports() {
      window.location.href = 'dashboard.html#myReports';
    }

    function showFamily() {
      window.location.href = 'dashboard.html#family';
    }

    function showReminders() {
      window.location.href = 'dashboard.html#reminders';
    }

    function showAppointments() {
      window.location.href = 'dashboard.html#appointments';
    }

    function showAIInsights() {
      window.location.href = 'dashboard.html#aiHealthInsights';
    }

    // Check authentication on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is logged in
      const userEmail = localStorage.getItem('healthmate_user');
      if (!userEmail) {
        // Redirect to login if not authenticated
        window.location.href = 'login.html';
        return;
      }
      
      // Load user profile data
      loadProfileData();
      
      // Update navigation with user info
      const userName = localStorage.getItem('healthmate_userName') || userEmail.split('@')[0];
      document.getElementById('userNavInfo').textContent = `Hello, ${userName}`;
    });

    // Logout function
    function logout() {
      if (confirm('Are you sure you want to logout?')) {
        localStorage.removeItem('healthmate_user');
        localStorage.removeItem('healthmate_loggedIn');
        localStorage.removeItem('healthmate_userId');
        localStorage.removeItem('healthmate_userName');
        window.location.href = 'login.html';
      }
    }

    // Load profile data from server (port 5000)
    async function loadProfileData() {
      try {
        const userEmail = localStorage.getItem('healthmate_user');
        
        if (!userEmail) {
          console.error('No user email found');
          displayDemoData();
          return;
        }

        console.log('Loading profile data for:', userEmail);
        
        // Try to fetch from server on port 5000
        try {
          const response = await fetch(`http://localhost:5000/api/profile/${userEmail}`);
          
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          
          const result = await response.json();
          
          if (result.success) {
            console.log('‚úÖ Profile data loaded from server:', result.user);
            displayProfileData(result.user);
            // Also store in localStorage for offline access
            localStorage.setItem('healthmate_profile', JSON.stringify(result.user));
            localStorage.setItem('healthmate_userName', result.user.full_name || userEmail.split('@')[0]);
          } else {
            console.error('Failed to load profile data from server:', result.message);
            loadFromLocalStorage();
          }
        } catch (serverError) {
          console.log('Server unavailable, loading from localStorage:', serverError.message);
          loadFromLocalStorage();
        }
      } catch (error) {
        console.error('Error loading profile:', error);
        loadFromLocalStorage();
      }
    }

    // Display profile data in the UI
    function displayProfileData(user) {
      console.log('Displaying profile data:', user);
      
      // Header section
      document.getElementById('profileFullName').textContent = user.full_name || 'Not set';
      document.getElementById('profileEmail').textContent = user.email || 'Not set';
      document.getElementById('profileBloodGroup').textContent = user.blood_group || 'Not set';
      document.getElementById('profileGender').textContent = user.gender || 'Not set';
      document.getElementById('profileAge').textContent = user.age ? `${user.age} years` : 'Not set';
      
      // Health stats
      document.getElementById('profileHeight').textContent = user.height_cm ? `${user.height_cm} cm` : '--';
      document.getElementById('profileWeight').textContent = user.weight_kg ? `${user.weight_kg} kg` : '--';
      
      // Calculate BMI if height and weight are available
      if (user.height_cm && user.weight_kg) {
        const heightInMeters = user.height_cm / 100;
        const bmi = (user.weight_kg / (heightInMeters * heightInMeters)).toFixed(1);
        document.getElementById('profileBMI').textContent = bmi;
      } else {
        document.getElementById('profileBMI').textContent = '--';
      }
      
      // Personal details
      document.getElementById('profileDetailName').textContent = user.full_name || 'Not set';
      document.getElementById('profileDetailEmail').textContent = user.email || 'Not set';
      document.getElementById('profilePhone').textContent = user.phone || 'Not set';
      document.getElementById('profileAddress').textContent = user.address || 'Not set';
      document.getElementById('profileDetailBlood').textContent = user.blood_group || 'Not set';
      document.getElementById('profileDetailGender').textContent = user.gender || 'Not set';
      
      // Chronic diseases
      const diseasesContainer = document.getElementById('chronicDiseases');
      diseasesContainer.innerHTML = '';
      
      try {
        let diseases = [];
        if (typeof user.chronic_diseases === 'string') {
          try {
            diseases = JSON.parse(user.chronic_diseases);
          } catch (e) {
            diseases = user.chronic_diseases.split(',');
          }
        } else if (Array.isArray(user.chronic_diseases)) {
          diseases = user.chronic_diseases;
        }
        
        if (diseases && diseases.length > 0 && diseases[0] !== 'None') {
          diseases.forEach(disease => {
            if (disease && disease !== 'None') {
              // Clean up disease name (remove "Other: " prefix if present)
              const cleanDisease = disease.startsWith('Other: ') ? disease.substring(7) : disease;
              const diseaseElement = document.createElement('span');
              diseaseElement.className = 'bg-red-100 text-red-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium';
              diseaseElement.textContent = cleanDisease;
              diseasesContainer.appendChild(diseaseElement);
            }
          });
        } else {
          diseasesContainer.innerHTML = '<p class="text-slate-600 text-sm">No chronic diseases recorded</p>';
        }
      } catch (e) {
        console.error('Error parsing chronic diseases:', e);
        diseasesContainer.innerHTML = '<p class="text-slate-600 text-sm">No chronic diseases recorded</p>';
      }
      
      // Populate edit form
      document.getElementById('editFullName').value = user.full_name || '';
      document.getElementById('editEmail').value = user.email || '';
      document.getElementById('editPhone').value = user.phone || '';
      document.getElementById('editAge').value = user.age || '';
      document.getElementById('editHeight').value = user.height_cm || '';
      document.getElementById('editWeight').value = user.weight_kg || '';
      document.getElementById('editBloodGroup').value = user.blood_group || '';
      document.getElementById('editGender').value = user.gender || '';
      document.getElementById('editAddress').value = user.address || '';
    }

    // Load data from localStorage
    function loadFromLocalStorage() {
      const userEmail = localStorage.getItem('healthmate_user');
      const userName = localStorage.getItem('healthmate_userName') || userEmail.split('@')[0];
      const profileData = localStorage.getItem('healthmate_profile');
      
      if (profileData) {
        try {
          const user = JSON.parse(profileData);
          displayProfileData(user);
          return;
        } catch (e) {
          console.error('Error parsing localStorage profile:', e);
        }
      }
      
      // If no profile data in localStorage, check for registration data
      const registrationData = localStorage.getItem('healthmate_registration');
      if (registrationData) {
        try {
          const regData = JSON.parse(registrationData);
          const user = {
            full_name: regData.name,
            email: regData.email,
            phone: regData.phone,
            age: regData.age,
            height_cm: regData.heightUnit === 'cm' ? regData.height : regData.height * 30.48, // Convert feet to cm
            weight_kg: regData.weight,
            blood_group: regData.bloodGroup,
            gender: regData.gender,
            address: regData.address,
            chronic_diseases: regData.chronicDiseases
          };
          displayProfileData(user);
          // Store this for future use
          localStorage.setItem('healthmate_profile', JSON.stringify(user));
          return;
        } catch (e) {
          console.error('Error parsing registration data:', e);
        }
      }
      
      // Fallback to demo data
      displayDemoData();
    }

    // Display demo data for testing
    function displayDemoData() {
      const userEmail = localStorage.getItem('healthmate_user') || 'demo@example.com';
      const userName = localStorage.getItem('healthmate_userName') || 'Demo User';
      
      const demoUser = {
        full_name: userName,
        email: userEmail,
        phone: '+1 234 567 8900',
        age: 30,
        height_cm: 175,
        weight_kg: 70,
        blood_group: 'O+',
        gender: 'Male',
        address: '123 Health Street, Wellness City',
        chronic_diseases: ['Hypertension']
      };
      
      displayProfileData(demoUser);
    }

    // Open edit profile modal
    function editProfile() {
      document.getElementById('editProfileModal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    // Close edit profile modal
    function closeEditModal() {
      document.getElementById('editProfileModal').classList.add('hidden');
      document.body.style.overflow = '';
    }

    // Close modal when clicking on backdrop
    document.getElementById('editProfileModal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeEditModal();
      }
    });

    // Save profile changes
    async function saveProfile() {
      const formData = {
        full_name: document.getElementById('editFullName').value,
        phone: document.getElementById('editPhone').value,
        age: parseInt(document.getElementById('editAge').value) || null,
        height_cm: parseFloat(document.getElementById('editHeight').value) || null,
        weight_kg: parseFloat(document.getElementById('editWeight').value) || null,
        blood_group: document.getElementById('editBloodGroup').value,
        gender: document.getElementById('editGender').value,
        address: document.getElementById('editAddress').value
      };

      // Validate required fields
      if (!formData.full_name || !formData.phone) {
        alert('Please fill in at least Full Name and Phone Number');
        return;
      }

      try {
        const userEmail = localStorage.getItem('healthmate_user');
        
        // Try to save to server on port 5000
        const response = await fetch(`http://localhost:5000/api/profile/${userEmail}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();
        
        if (result.success) {
          // Update localStorage
          localStorage.setItem('healthmate_userName', formData.full_name);
          
          // Update current profile in localStorage
          const currentProfile = localStorage.getItem('healthmate_profile');
          if (currentProfile) {
            const profile = JSON.parse(currentProfile);
            const updatedProfile = { ...profile, ...formData };
            localStorage.setItem('healthmate_profile', JSON.stringify(updatedProfile));
          }
          
          // Reload profile data
          loadProfileData();
          closeEditModal();
          
          // Show success message
          alert('Profile updated successfully!');
        } else {
          // Still update localStorage even if server fails
          localStorage.setItem('healthmate_userName', formData.full_name);
          const currentProfile = localStorage.getItem('healthmate_profile');
          if (currentProfile) {
            const profile = JSON.parse(currentProfile);
            const updatedProfile = { ...profile, ...formData };
            localStorage.setItem('healthmate_profile', JSON.stringify(updatedProfile));
          }
          
          loadProfileData();
          closeEditModal();
          alert('Profile updated locally (server unavailable). Changes will sync when server is back online.');
        }
      } catch (error) {
        console.error('Error saving profile:', error);
        // Update localStorage anyway
        localStorage.setItem('healthmate_userName', formData.full_name);
        const currentProfile = localStorage.getItem('healthmate_profile');
        if (currentProfile) {
          const profile = JSON.parse(currentProfile);
          const updatedProfile = { ...profile, ...formData };
          localStorage.setItem('healthmate_profile', JSON.stringify(updatedProfile));
        }
        
        loadProfileData();
        closeEditModal();
        alert('Profile updated locally. Server connection failed.');
      }
    }

    // Handle profile picture change
    function handleProfilePictureChange(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('profilePicture').src = e.target.result;
          console.log('Profile picture changed');
        };
        reader.readAsDataURL(file);
      }
    }

    // Handle window resize
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 768 && mobileMenuOpen) {
        toggleMobileMenu();
      }
    });

    // Make functions available globally
    window.logout = logout;
    window.editProfile = editProfile;
    window.closeEditModal = closeEditModal;
    window.saveProfile = saveProfile;
    window.handleProfilePictureChange = handleProfilePictureChange;
    window.toggleMobileMenu = toggleMobileMenu;
    window.goToDashboard = goToDashboard;
    window.goToReports = goToReports;
    window.goToAppointments = goToAppointments;
    window.goToFamily = goToFamily;
    window.goToReminders = goToReminders;
    window.goToAIInsights = goToAIInsights;
  </script>
</body>
</html>